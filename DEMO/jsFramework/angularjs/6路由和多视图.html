<!doctype html>
<html lang="zh-cn" ng-app="phonecatApp">
<head>
    <meta charset="utf-8">
    <title>Google Phone Gallery</title>
    <link href="/css/bootstrap3.3.5.css" rel="stylesheet" />

    <link href="app.css" rel="stylesheet" />
    <script src="/js/angular.js"></script>
    <script src="http://cdn.bootcss.com/angular.js/1.5.0-rc.1/angular-route.js"></script>
</head>
<body class="container">
    <div ng-view></div>
    <!--app.js-->
    <script>
        var phonecatApp = angular.module("phonecatApp", ['ngRoute', 'phonecatControllers']);
        phonecatApp.config(['$routeProvider', function ($routeProvider) {
            $routeProvider.when('/phones', {
                templateUrl: 'partials/phone-list.html',
                controller: 'PhoneListCtrl'
            }).when(
            "/phones/:phoneId",
            {
                templateUrl: 'partials/phone-detail.html',
                controller: 'PhoneDetailCtrl'
            }).otherwise(
            {
                redirectTo: '/phones'

            })
        }]);
    </script>
    <!--controller.js-->
    <script>
        var phonecatControllers = angular.module('phonecatControllers', []);
        phonecatControllers.controller("PhoneListCtrl", ['$scope', '$http', function ($scope, $http) {
            $http.get('phones.json').success(function (data) {
                $scope.phones = data;
            });
            $scope.orderProp = 'age';

        }]);
        //phonecatControllers.controller('PhoneDetailCtrl', ['$scope', '$routeParams',
        //  function ($scope, $routeParams) {
        //      $scope.phoneId = $routeParams.phoneId;
        //  }]);
        phonecatControllers.controller('PhoneDetailCtrl', ['$scope', '$routeParams', '$http',
     function ($scope, $routeParams, $http) {
         $http.get('phones/' + $routeParams.phoneId + '.json').success(function (data) {
             $scope.phone = data;
         });
     }]);
    </script>
</body>
</html>
